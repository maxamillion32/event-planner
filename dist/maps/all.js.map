{"version":3,"sources":["all.js","app.js"],"names":["document","checkValFields","errorTypes","indexOf","FV","Validator","EMAIL","valCheckEmailEl","className","innerHTML","MINLENGTH","valCheckLengthEl","CONTAINSUPPER","valCheckUpperEl","CONTAINSLOWER","valCheckLowerEl","CONTAINSSPECIAL","valCheckSpecialEl","EQUALSFIELD","signupPasswordEl","value","signupPassword2El","valCheckMatchEl","CONTAINSNUMBER","valCheckNumberEl","signupNameEl","signupEmailEl","valCheckRequiredEl","authHandler","error","authData","userRef","ref","child","uid","eventRef","extraRef","storeExtra","set","name","employer","signupEmployerEl","title","signupTitleEl","birthday","signupBirthday","signOutLinkEl","hidden","signInLinkEl","APP","displayEventCreation","on","snapshot","events","val","_redrawEvents","err","console","log","_clearEl","el","firstChild","removeChild","eventContainerEl","forEach","event","cardDiv","createElement","cardTitleDiv","headerDiv","appendChild","createTextNode","del","setAttribute","id","cardContentDiv","p","host","type","address","city","state","zip","country","begin","Date","end","toLocaleString","message","_clearGuests","tags","VTILAPP","vtil","slice","tag","removeTag","_clearAddress","pred","addressList","addressEl","disabled","_clearElements","eventNameEl","getElementById","eventTypeEl","eventHostEl","startDateEl","endDateEl","locationInputEl","_fillInAddress","place","autocomplete","getPlace","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","address_components","Symbol","iterator","next","done","component","addressType","types","streetNumberEl","short_name","routeEl","cityEl","stateEl","postalCodeEl","countryEl","showEventPlanner","signInContainerEl","eventPlannerContainerEl","signUpContainerEl","resetPasswordContainerEl","showEventContainerEl","checkEventFields","showEventContainer","window","Object","create","Firebase","signInEmailEl","signInPasswordEl","submitPasswordButton","signupAdditionalInfoEl","signupSwitchEl","contentEl","inputEl","messageEl","progressBarEl","progressBarLabelEl","fieldsCompleted","validator","passwordField","Field","password2Field","emailField","constraints","Constraint","fields","signUp","createUser","email","password","userData","signIn","validateSignUp","skipCustomValidation","errors","checkForErrors","passwordErrors","password2Errors","emailErrors","push","setCustomValidity","onclick","showAdditionalInfo","checked","emailIn","passwordIn","authWithPassword","signOut","unauth","off","showSignIn","resetPassword","code","VTIL","completed","length","toString","displayEvents","addTag","initAutocomplete","google","maps","places","Autocomplete","addListener","geolocate","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","lng","longitude","circle","Circle","center","radius","accuracy","setBounds","getBounds","removeEvent","index","i","splice","submitForm","d","toISOString","guests","onbeforeunload","showSignUp","showResetPassword"],"mappings":"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","file":"all.js","sourcesContent":["'use strict';\n\n(function (document) {\n\t'use strict';\n\n\twindow.APP = window.APP || {};\n\twindow.VTILAPP = Object.create(null);\n\n\t// Register the callback to be fired every time auth state changes\n\tvar ref = new Firebase(\"https://swanky-event-planner.firebaseIO.com\");\n\n\t//signing in\n\tvar signInEmailEl = document.getElementById('signin-email');\n\tvar signInPasswordEl = document.getElementById('signin-password');\n\tvar signInContainerEl = document.getElementById('sign-in-container');\n\tvar signOutLinkEl = document.getElementById('sign-out-link');\n\tvar signInLinkEl = document.getElementById('sign-in-link');\n\n\t//signing up\n\tvar signUpContainerEl = document.getElementById('sign-up-container');\n\tvar eventPlannerContainerEl = document.getElementById('event-planner-container');\n\tvar signupNameEl = document.getElementById('signup-name');\n\tvar signupEmailEl = document.getElementById('signup-email');\n\tvar signupPasswordEl = document.getElementById('signup-password');\n\tvar signupPassword2El = document.getElementById('signup-password2');\n\tvar signupEmployerEl = document.getElementById('signup-employer');\n\tvar signupTitleEl = document.getElementById('signup-title');\n\tvar signupBirthday = document.getElementById('signup-birthday');\n\tvar submitPasswordButton = document.getElementById('submit-password-button');\n\tvar signupAdditionalInfoEl = document.getElementById('signup-additional-info');\n\tvar signupSwitchEl = document.getElementById('switch-1');\n\n\t//Reset Password\n\tvar resetPasswordContainerEl = document.getElementById('reset-password-container');\n\tvar resetPasswordEmail = document.getElementById('reset-password-email');\n\n\t//event creation\n\tvar eventNameEl = document.getElementById('event-name');\n\tvar eventTypeEl = document.getElementById('event-type');\n\tvar eventHostEl = document.getElementById('event-host');\n\tvar startDateEl = document.getElementById('start-date');\n\tvar endDateEl = document.getElementById('end-date');\n\tvar contentEl = document.getElementById('vtil-content');\n\tvar inputEl = document.getElementById('vtil-input');\n\tvar locationInputEl = document.getElementById('location-input');\n\tvar streetNumberEl = document.getElementById('street-number');\n\tvar routeEl = document.getElementById('route');\n\tvar cityEl = document.getElementById('city');\n\tvar stateEl = document.getElementById('state');\n\tvar postalCodeEl = document.getElementById('postal-code');\n\tvar countryEl = document.getElementById('country');\n\tvar messageEl = document.getElementById('message');\n\tvar progressBarEl = document.getElementById('progress-bar');\n\tvar progressBarLabelEl = document.getElementById('progress-bar-label');\n\tvar addressList = [streetNumberEl, routeEl, cityEl, stateEl, postalCodeEl, countryEl];\n\n\t//event display\n\tvar eventContainerEl = document.getElementById('event-container');\n\tvar showEventContainerEl = document.getElementById('show-event-container');\n\n\tvar events = []; //The users events\n\tvar userRef = undefined; //Tag input list\n\tvar eventRef = undefined; //Events\n\tvar extraRef = undefined; //Extra user data\n\tvar placeSearch = undefined; //Location search\n\tvar autocomplete = undefined; //Location search\n\tvar storeExtra = false; //Store extra user info\n\tvar fieldsCompleted = 0; //Fields filled out\n\n\t//Validation\n\tvar validator = new FV.Validator();\n\tvar passwordField = new FV.Field(\"Password1\", signupPasswordEl);\n\tvar password2Field = new FV.Field(\"Password2\", signupPassword2El, signupPasswordEl);\n\tvar emailField = new FV.Field('EmailError', signupEmailEl);\n\n\tvar valCheckLengthEl = document.getElementById('val-check-length');\n\tvar valCheckSpecialEl = document.getElementById('val-check-special');\n\tvar valCheckUpperEl = document.getElementById('val-check-upper');\n\tvar valCheckLowerEl = document.getElementById('val-check-lower');\n\tvar valCheckMatchEl = document.getElementById('val-check-match');\n\tvar valCheckRequiredEl = document.getElementById('val-check-required');\n\tvar valCheckNumberEl = document.getElementById('val-check-number');\n\tvar valCheckEmailEl = document.getElementById('val-check-email');\n\n\tpasswordField.constraints = [new FV.Constraint(FV.Validator.MINLENGTH, \"* Password must be at least 8 characters long.\\n\", 8), new FV.Constraint(FV.Validator.CONTAINSUPPER, \"* Password must contain at least one upper case letter.\\n\"), new FV.Constraint(FV.Validator.CONTAINSLOWER, \"* Password must contain at least one lower case letter.\\n\"), new FV.Constraint(FV.Validator.CONTAINSSPECIAL, \"* Password must contain at least one special character (!, @, #, $, %, ^, &, *).\\n\"), new FV.Constraint(FV.Validator.CONTAINSNUMBER, \"* Password must contain at least one number.\\n\")];\n\n\tpassword2Field.constraints = [new FV.Constraint(FV.Validator.EQUALSFIELD, \"* Must match your password.\\n\")];\n\n\temailField.constraints = [new FV.Constraint(FV.Validator.EMAIL, \"* Must be a valid email address.\\n\")];\n\n\tvalidator.fields = [passwordField, password2Field, emailField];\n\n\t/******************************************************************\n Sign up functionality\n /******************************************************************\n \t/**\n  * User is signing up\n  * \n  */\n\tAPP.signUp = function () {\n\n\t\tref.createUser({\n\t\t\temail: signupEmailEl.value,\n\t\t\tpassword: signupPasswordEl.value\n\t\t}, function (error, userData) {\n\n\t\t\tif (error) {\n\n\t\t\t\tconsole.log(\"Error creating user:\", error);\n\t\t\t} else {\n\n\t\t\t\tstoreExtra = true;\n\n\t\t\t\tAPP.signIn(signupEmailEl.value, signupPasswordEl.value);\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n  * Check for various validation errors\n  * \n  */\n\tfunction checkValFields(errorTypes) {\n\n\t\tif (errorTypes.indexOf(FV.Validator.EMAIL) === -1) {\n\n\t\t\tvalCheckEmailEl.className = 'val-check-good';\n\t\t\tvalCheckEmailEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Must use a valid email address';\n\t\t} else {\n\n\t\t\tvalCheckEmailEl.className = 'val-check-bad';\n\t\t\tvalCheckEmailEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Must use a valid email address';\n\t\t}\n\n\t\tif (errorTypes.indexOf(FV.Validator.MINLENGTH) === -1) {\n\n\t\t\tvalCheckLengthEl.className = 'val-check-good';\n\t\t\tvalCheckLengthEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Password must be at least 8 characters long';\n\t\t} else {\n\n\t\t\tvalCheckLengthEl.className = 'val-check-bad';\n\t\t\tvalCheckLengthEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Password must be at least 8 characters long';\n\t\t}\n\n\t\tif (errorTypes.indexOf(FV.Validator.CONTAINSUPPER) === -1) {\n\n\t\t\tvalCheckUpperEl.className = 'val-check-good';\n\t\t\tvalCheckUpperEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Password must contain at least one upper case character';\n\t\t} else {\n\n\t\t\tvalCheckUpperEl.className = 'val-check-bad';\n\t\t\tvalCheckUpperEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Password must contain at least one upper case character';\n\t\t}\n\n\t\tif (errorTypes.indexOf(FV.Validator.CONTAINSLOWER) === -1) {\n\n\t\t\tvalCheckLowerEl.className = 'val-check-good';\n\t\t\tvalCheckLowerEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Password must contain at least one lower case character';\n\t\t} else {\n\n\t\t\tvalCheckLowerEl.className = 'val-check-bad';\n\t\t\tvalCheckLowerEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Password must contain at least one lower case character';\n\t\t}\n\n\t\tif (errorTypes.indexOf(FV.Validator.CONTAINSSPECIAL) === -1) {\n\n\t\t\tvalCheckSpecialEl.className = 'val-check-good';\n\t\t\tvalCheckSpecialEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Password must contain at least one special character (!, @, #, $, %, ^, &, *)';\n\t\t} else {\n\n\t\t\tvalCheckSpecialEl.className = 'val-check-bad';\n\t\t\tvalCheckSpecialEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Password must contain at least one special character (!, @, #, $, %, ^, &, *)';\n\t\t}\n\n\t\tif (errorTypes.indexOf(FV.Validator.EQUALSFIELD) === -1 && signupPasswordEl.value !== '' && signupPassword2El.value !== '') {\n\n\t\t\tvalCheckMatchEl.className = 'val-check-good';\n\t\t\tvalCheckMatchEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Passwords must match';\n\t\t} else {\n\n\t\t\tvalCheckMatchEl.className = 'val-check-bad';\n\t\t\tvalCheckMatchEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Passwords must match';\n\t\t}\n\n\t\tif (errorTypes.indexOf(FV.Validator.CONTAINSNUMBER) === -1) {\n\n\t\t\tvalCheckNumberEl.className = 'val-check-good';\n\t\t\tvalCheckNumberEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Password must contain at least one number';\n\t\t} else {\n\n\t\t\tvalCheckNumberEl.className = 'val-check-bad';\n\t\t\tvalCheckNumberEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Password must contain at least one number';\n\t\t}\n\n\t\tif (signupNameEl.value === '' || signupEmailEl.value === '' || signupPasswordEl.value === '' || signupPassword2El.value === '') {\n\n\t\t\tvalCheckRequiredEl.className = 'val-check-bad';\n\t\t\tvalCheckRequiredEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> All required fields must be filled out';\n\t\t} else {\n\n\t\t\tvalCheckRequiredEl.className = 'val-check-good';\n\t\t\tvalCheckRequiredEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> All required fields must be filled out';\n\t\t}\n\t}\n\n\t/**\n  * Validate sign up page\n  * \n  * @param  {Boolean} skipCustomValidation checks if we will show custom validation\n  * \n  */\n\tAPP.validateSignUp = function (skipCustomValidation) {\n\n\t\tvar errors = validator.checkForErrors();\n\t\tvar errorTypes = [];\n\t\tvar passwordErrors = \"\";\n\t\tvar password2Errors = \"\";\n\t\tvar emailErrors = \"\";\n\n\t\terrors.forEach(function (error) {\n\n\t\t\tswitch (error.name) {\n\n\t\t\t\tcase \"Password1\":\n\n\t\t\t\t\tpasswordErrors += error.error;\n\t\t\t\t\terrorTypes.push(error.type);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Password2\":\n\n\t\t\t\t\tpassword2Errors += error.error;\n\t\t\t\t\terrorTypes.push(error.type);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"EmailError\":\n\n\t\t\t\t\temailErrors += error.error;\n\t\t\t\t\terrorTypes.push(error.type);\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t});\n\n\t\tif (passwordErrors !== '') {\n\n\t\t\tpasswordErrors = \"Please correct the following errors:\\n\" + passwordErrors;\n\t\t}\n\n\t\tif (password2Errors !== '') {\n\n\t\t\tpassword2Errors = \"Please correct the following errors:\\n\" + password2Errors;\n\t\t}\n\n\t\tif (emailErrors !== '') {\n\n\t\t\temailErrors = \"Please correct the following errors:\\n\" + emailErrors;\n\t\t}\n\n\t\t//These will only display one at a time\n\t\tif (!skipCustomValidation) {\n\n\t\t\tsignupPasswordEl.setCustomValidity(passwordErrors);\n\t\t\tsignupPassword2El.setCustomValidity(password2Errors);\n\t\t}\n\n\t\tcheckValFields(errorTypes);\n\t};\n\n\t/**\n  * Validating input before submitting the password\n  * \n  */\n\tsubmitPasswordButton.onclick = APP.validateSignUp;\n\n\t/**\n  * Show/hide additional info\n  * \n  */\n\tAPP.showAdditionalInfo = function () {\n\n\t\tsignupAdditionalInfoEl.hidden = !signupSwitchEl.checked;\n\t};\n\n\t/******************************************************************\n Sign in functionality\n /******************************************************************\n \t/**\n  * User has signed in\n  *\n  */\n\tfunction authHandler(error, authData) {\n\n\t\tif (error) {\n\n\t\t\t//Handle the error\n\n\t\t} else if (!authData) {\n\n\t\t\t\tconsole.log(\"User is logged out\");\n\t\t\t} else {\n\n\t\t\t\tuserRef = ref.child('users/' + authData.uid);\n\t\t\t\teventRef = userRef.child('events/');\n\t\t\t\textraRef = userRef.child('extra/');\n\n\t\t\t\t//If just signing up store the extra user data\n\t\t\t\tif (storeExtra === true) {\n\n\t\t\t\t\tstoreExtra = false;\n\n\t\t\t\t\textraRef.set({\n\n\t\t\t\t\t\tname: signupNameEl.value,\n\t\t\t\t\t\temployer: signupEmployerEl.value,\n\t\t\t\t\t\ttitle: signupTitleEl.value,\n\t\t\t\t\t\tbirthday: signupBirthday.value\n\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tsignOutLinkEl.hidden = false;\n\t\t\t\tsignInLinkEl.hidden = true;\n\n\t\t\t\tAPP.displayEventCreation();\n\n\t\t\t\t/**\n     * Get the data\n     * @param  {Object} snapshot value of the event\n     */\n\t\t\t\teventRef.on(\"value\", function (snapshot) {\n\n\t\t\t\t\tevents = snapshot.val();\n\n\t\t\t\t\t_redrawEvents();\n\t\t\t\t}, function (err) {\n\n\t\t\t\t\tconsole.log('Error: ', err);\n\t\t\t\t});\n\t\t\t}\n\t}\n\n\t/**\n  * User is signing in\n  * \n  */\n\tAPP.signIn = function (emailIn, passwordIn) {\n\n\t\tvar email = emailIn || signInEmailEl.value;\n\t\tvar password = passwordIn || signInPasswordEl.value;\n\n\t\t// Sign in with an email/password combination\n\t\tref.authWithPassword({\n\t\t\temail: email,\n\t\t\tpassword: password\n\t\t}, authHandler);\n\t};\n\n\t/******************************************************************\n Sign out functionality\n /******************************************************************\n \t/**\n  * User is signing out\n  * \n  */\n\tAPP.signOut = function () {\n\n\t\tsignOutLinkEl.hidden = true;\n\t\tsignInLinkEl.hidden = false;\n\t\tref.unauth();\n\t\teventRef.off();\n\t\textraRef.off();\n\t\tuserRef = undefined;\n\t\teventRef = undefined;\n\t\textraRef = undefined;\n\t\tsignInEmailEl.value = '';\n\t\tsignInPasswordEl.value = '';\n\t\tsignupNameEl.value = '';\n\t\tsignupEmailEl.value = '';\n\t\tsignupPasswordEl.value = '';\n\t\tsignupPassword2El.value = '';\n\t\t_clearElements();\n\t\t_clearEl(eventContainerEl);\n\t\tAPP.showSignIn();\n\t};\n\n\t/******************************************************************\n Reset password functionality\n /******************************************************************\n \t/**\n  * Reset the users password\n  * \n  */\n\tAPP.resetPassword = function () {\n\n\t\tref.resetPassword({\n\t\t\temail: \"\"\n\t\t}, function (error) {\n\t\t\tif (error) {\n\t\t\t\tswitch (error.code) {\n\t\t\t\t\tcase \"INVALID_USER\":\n\t\t\t\t\t\tconsole.log(\"The specified user account does not exist.\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.log(\"Error resetting password:\", error);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.log(\"Password reset email sent successfully!\");\n\t\t\t}\n\t\t});\n\t};\n\n\t/******************************************************************\n Event functionality\n /******************************************************************\n \t/**\n * Instantiate a new vtil object\n * \n **/\n\tVTILAPP.vtil = new VTIL(contentEl, inputEl, 'VTILAPP.vtil');\n\n\t/**\n  * Checks if fields are completed\n  * \n  */\n\tAPP.checkEventFields = function () {\n\n\t\tvar completed = 0;\n\n\t\tif (eventNameEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (eventTypeEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (eventHostEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (startDateEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (endDateEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (VTILAPP.vtil.tags.length > 0) {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (streetNumberEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (routeEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (cityEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (stateEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (postalCodeEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (countryEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tif (messageEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\t\t}\n\n\t\tfieldsCompleted = completed;\n\t\tprogressBarLabelEl.innerHTML = fieldsCompleted.toString() + ' of 13 fields completed';\n\t\tprogressBarEl.value = fieldsCompleted;\n\t};\n\n\t/**\n  * Display event creation if user has logged in\n  * \n  */\n\tAPP.displayEventCreation = function () {\n\n\t\tif (eventRef) {\n\n\t\t\tshowEventPlanner();\n\t\t}\n\t};\n\n\t/**\n  * Display events if user has logged in\n  * \n  */\n\tAPP.displayEvents = function () {\n\n\t\tif (eventRef) {\n\n\t\t\tshowEventContainer();\n\t\t}\n\t};\n\n\t/**\n * Clear all child elements\n *\n **/\n\tfunction _clearEl(el) {\n\n\t\twhile (el.firstChild) {\n\n\t\t\tel.removeChild(el.firstChild);\n\t\t}\n\t}\n\n\t/**\n  * Draw the events to te screen\n  * \n  */\n\tfunction _redrawEvents() {\n\n\t\t_clearEl(eventContainerEl);\n\n\t\tevents.forEach(function (event) {\n\n\t\t\t//Create the card\n\t\t\tvar cardDiv = document.createElement('div');\n\t\t\tcardDiv.className = \"card-width mdl-card mdl-shadow--2dp vert-cent animated slideInDown\";\n\n\t\t\t//Card Title\n\t\t\tvar cardTitleDiv = document.createElement('div');\n\t\t\tcardTitleDiv.className = \"mdl-card__title\";\n\t\t\tvar headerDiv = document.createElement('h2');\n\t\t\theaderDiv.className = \"mdl-card__title-text\";\n\t\t\theaderDiv.appendChild(document.createTextNode(event.title));\n\n\t\t\tvar del = document.createElement('a');\n\t\t\tdel.setAttribute('href', \"#\");\n\t\t\tdel.setAttribute('title', \"Delete\");\n\t\t\tdel.className = \"card-trash\";\n\t\t\tdel.setAttribute('onclick', 'APP.removeEvent(\"' + event.id + '\")');\n\t\t\tdel.innerHTML = '<i class=\"fa fa-trash-o\"></i>';\n\n\t\t\theaderDiv.appendChild(del);\n\t\t\tcardTitleDiv.appendChild(headerDiv);\n\t\t\tcardDiv.appendChild(cardTitleDiv);\n\n\t\t\t//Card Body\n\t\t\tvar cardContentDiv = document.createElement('div');\n\t\t\tcardContentDiv.className = \"mdl-card__supporting-text\";\n\t\t\tvar p = document.createElement('p');\n\t\t\tp.innerHTML = \"<b>\" + event.host + '</b> is hosting a ' + '<b>' + event.type + '</b> at ';\n\t\t\tcardContentDiv.appendChild(p);\n\n\t\t\tp = document.createElement('p');\n\t\t\tp.innerHTML = event.address + '<br />' + event.city + ', ' + event.state + ' ' + event.zip + '<br />' + event.country;\n\t\t\tcardContentDiv.appendChild(p);\n\n\t\t\tp = document.createElement('p');\n\t\t\tp.appendChild(document.createTextNode(\"on\"));\n\t\t\tcardContentDiv.appendChild(p);\n\n\t\t\tp = document.createElement('p');\n\t\t\tvar begin = new Date(event.begin);\n\t\t\tvar end = new Date(event.end);\n\t\t\tp.innerHTML = '<b>' + begin.toLocaleString() + '</b>' + ' to ' + '<b>' + end.toLocaleString() + '</b>';\n\t\t\tcardContentDiv.appendChild(p);\n\n\t\t\tp = document.createElement('p');\n\t\t\tp.innerHTML = 'and <b>' + event.host + '</b> wishes to let you know that<br/>' + event.message;\n\t\t\tcardContentDiv.appendChild(p);\n\n\t\t\tcardDiv.appendChild(cardContentDiv);\n\t\t\teventContainerEl.appendChild(cardDiv);\n\t\t});\n\t}\n\n\t/**\n  * Add a person\n  * \n  */\n\tAPP.addTag = function () {\n\n\t\tVTILAPP.vtil.addTag();\n\t\tAPP.checkEventFields();\n\t};\n\n\t/**\n  * Clear guests\n  * \n  */\n\tfunction _clearGuests() {\n\n\t\tvar tags = VTILAPP.vtil.tags.slice(0);\n\n\t\ttags.forEach(function (tag) {\n\n\t\t\tVTILAPP.vtil.removeTag(tag.id);\n\t\t});\n\t}\n\n\t/**\n  * Clear the address elements\n  * @param  {Boolean} pred disable the field or not?\n  * \n  */\n\tfunction _clearAddress(pred) {\n\n\t\taddressList.forEach(function (addressEl) {\n\n\t\t\taddressEl.value = '';\n\t\t\taddressEl.disabled = pred;\n\t\t});\n\t}\n\n\t/**\n  * Clear the form elements\n  * \n  */\n\tfunction _clearElements() {\n\n\t\teventNameEl = document.getElementById('eventName');\n\t\teventTypeEl = document.getElementById('eventType');\n\t\teventHostEl = document.getElementById('eventHost');\n\t\tstartDateEl = document.getElementById('startDate');\n\t\tendDateEl = document.getElementById('endDate');\n\t\tlocationInputEl = document.getElementById('location-input');\n\n\t\t_clearAddress(true);\n\t\t_clearGuests();\n\t}\n\n\t/**\n  * Fills in the address when the location is retrieved\n  * \n  */\n\tfunction _fillInAddress() {\n\t\t// Get the place details from the autocomplete object.\n\t\tvar place = autocomplete.getPlace();\n\n\t\t_clearAddress(false);\n\n\t\t// Get each component of the address from the place details\n\t\t// and fill the corresponding field on the form.\n\t\tvar _iteratorNormalCompletion = true;\n\t\tvar _didIteratorError = false;\n\t\tvar _iteratorError = undefined;\n\n\t\ttry {\n\t\t\tfor (var _iterator = place.address_components[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\tvar component = _step.value;\n\n\n\t\t\t\tvar addressType = component.types[0];\n\n\t\t\t\tswitch (addressType) {\n\n\t\t\t\t\t//Address1\n\t\t\t\t\tcase 'street_number':\n\t\t\t\t\t\tstreetNumberEl.value = component.short_name;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t//Address2\n\t\t\t\t\tcase 'route':\n\t\t\t\t\t\trouteEl.value = component.short_name;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t//City\n\t\t\t\t\tcase 'locality':\n\t\t\t\t\t\tcityEl.value = component.short_name;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t//State\n\t\t\t\t\tcase 'administrative_area_level_1':\n\t\t\t\t\t\tstateEl.value = component.short_name;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t//Zip\n\t\t\t\t\tcase 'postal_code':\n\t\t\t\t\t\tpostalCodeEl.value = component.short_name;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t//Country\n\t\t\t\t\tcase 'country':\n\t\t\t\t\t\tcountryEl.value = component.short_name;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\t_didIteratorError = true;\n\t\t\t_iteratorError = err;\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t_iterator.return();\n\t\t\t\t}\n\t\t\t} finally {\n\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n  * Initializes the autocomplete object using the location\n  * \n  */\n\tAPP.initAutocomplete = function () {\n\t\t// Create the autocomplete object, restricting the search to geographical\n\t\t// location types.\n\t\tautocomplete = new google.maps.places.Autocomplete(\n\t\t/** @type {!HTMLInputElement} */locationInputEl, { types: ['geocode'] });\n\n\t\t// When the user selects an address from the dropdown, populate the address\n\t\t// fields in the form.\n\t\tautocomplete.addListener('place_changed', _fillInAddress);\n\t};\n\n\t/**\n  * Get the location\n  * \n  */\n\tAPP.geolocate = function () {\n\n\t\tif (navigator.geolocation) {\n\n\t\t\tnavigator.geolocation.getCurrentPosition(function (position) {\n\n\t\t\t\tvar geolocation = {\n\n\t\t\t\t\tlat: position.coords.latitude,\n\t\t\t\t\tlng: position.coords.longitude\n\n\t\t\t\t};\n\n\t\t\t\tvar circle = new google.maps.Circle({\n\n\t\t\t\t\tcenter: geolocation,\n\t\t\t\t\tradius: position.coords.accuracy\n\n\t\t\t\t});\n\n\t\t\t\tautocomplete.setBounds(circle.getBounds());\n\t\t\t});\n\t\t}\n\t};\n\n\t/**\n  * Remove an event from events\n  * @param  {[type]} id [description]\n  * @return {[type]}    [description]\n  */\n\tAPP.removeEvent = function (id) {\n\n\t\tvar index = -1;\n\n\t\tfor (var i = 0; i < events.length; ++i) {\n\n\t\t\tif (id === events[i].id) {\n\n\t\t\t\tindex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (index !== -1) {\n\n\t\t\tevents = events.splice(index, 1);\n\t\t\teventRef.set(events);\n\t\t}\n\t};\n\n\t/**\n  * Save the event\n  *\n  */\n\tAPP.submitForm = function () {\n\n\t\tvar d = new Date();\n\n\t\tevents.push({\n\n\t\t\t'id': d.toISOString(),\n\t\t\t'title': eventNameEl.value,\n\t\t\t'type': eventTypeEl.value,\n\t\t\t'host': eventHostEl.value,\n\t\t\t'begin': startDateEl.value,\n\t\t\t'end': endDateEl.value,\n\t\t\t'guests': VTILAPP.vtil.tags,\n\t\t\t'address': streetNumberEl.value + ' ' + routeEl.value,\n\t\t\t'city': cityEl.value,\n\t\t\t'state': stateEl.value,\n\t\t\t'zip': postalCodeEl.value,\n\t\t\t'country': countryEl.value,\n\t\t\t'message': messageEl.value\n\n\t\t});\n\n\t\teventRef.set(events);\n\n\t\t_clearElements();\n\t};\n\n\t/**\n  * Sign out on exit\n  * \n  */\n\twindow.onbeforeunload = APP.signOut;\n\n\t/******************************************************************\n Display functionality\n /******************************************************************\n \t/**\n  * Show the sign up form\n  * \n  */\n\tAPP.showSignUp = function () {\n\n\t\tsignInContainerEl.hidden = true;\n\t\teventPlannerContainerEl.hidden = true;\n\t\tsignUpContainerEl.hidden = false;\n\t\tresetPasswordContainerEl.hidden = true;\n\t\tshowEventContainerEl.hidden = true;\n\t\tAPP.validateSignUp(true);\n\t};\n\n\t/**\n  * Show the sign in form\n  * \n  */\n\tAPP.showSignIn = function () {\n\n\t\tsignInContainerEl.hidden = false;\n\t\teventPlannerContainerEl.hidden = true;\n\t\tsignUpContainerEl.hidden = true;\n\t\tresetPasswordContainerEl.hidden = true;\n\t\tshowEventContainerEl.hidden = true;\n\t};\n\n\t/**\n  * Show the event planner\n  * \n  */\n\tfunction showEventPlanner() {\n\n\t\tsignInContainerEl.hidden = true;\n\t\teventPlannerContainerEl.hidden = false;\n\t\tsignUpContainerEl.hidden = true;\n\t\tresetPasswordContainerEl.hidden = true;\n\t\tshowEventContainerEl.hidden = true;\n\n\t\tAPP.checkEventFields();\n\t};\n\n\t/**\n  * Show the reset password screen\n  * \n  */\n\tAPP.showResetPassword = function () {\n\n\t\tsignInContainerEl.hidden = true;\n\t\teventPlannerContainerEl.hidden = true;\n\t\tsignUpContainerEl.hidden = true;\n\t\tresetPasswordContainerEl.hidden = false;\n\t\tshowEventContainerEl.hidden = true;\n\t};\n\n\t/**\n  * Show the events\n  * \n  */\n\tfunction showEventContainer() {\n\n\t\tsignInContainerEl.hidden = true;\n\t\teventPlannerContainerEl.hidden = true;\n\t\tsignUpContainerEl.hidden = true;\n\t\tresetPasswordContainerEl.hidden = true;\n\t\tshowEventContainerEl.hidden = false;\n\t};\n})(document);","(function(document) {\n\t'use strict';\n\n\twindow.APP = window.APP || {};\n\twindow.VTILAPP = Object.create(null);\n\n\t// Register the callback to be fired every time auth state changes\n\tlet ref = new Firebase(\"https://swanky-event-planner.firebaseIO.com\");\n\n\t//signing in\n\tlet signInEmailEl = \t\t\tdocument.getElementById('signin-email');\n\tlet signInPasswordEl = \t\t\tdocument.getElementById('signin-password');\n\tlet signInContainerEl = \t\tdocument.getElementById('sign-in-container');\n\tlet signOutLinkEl =\t\t\t\tdocument.getElementById('sign-out-link');\n\tlet signInLinkEl =\t\t\t\tdocument.getElementById('sign-in-link');\n\n\t//signing up\n\tlet signUpContainerEl = \t\tdocument.getElementById('sign-up-container');\n\tlet eventPlannerContainerEl = \tdocument.getElementById('event-planner-container');\n\tlet signupNameEl = \t\t\t\tdocument.getElementById('signup-name');\n\tlet signupEmailEl = \t\t\tdocument.getElementById('signup-email');\n\tlet signupPasswordEl = \t\t\tdocument.getElementById('signup-password');\n\tlet signupPassword2El = \t\tdocument.getElementById('signup-password2');\n\tlet signupEmployerEl =\t\t\tdocument.getElementById('signup-employer');\n\tlet signupTitleEl =\t\t\t\tdocument.getElementById('signup-title');\n\tlet signupBirthday =\t\t\tdocument.getElementById('signup-birthday');\n\tlet submitPasswordButton =\t\tdocument.getElementById('submit-password-button');\n\tlet signupAdditionalInfoEl =\tdocument.getElementById('signup-additional-info');\n\tlet signupSwitchEl =\t\t\tdocument.getElementById('switch-1');\n\n\t//Reset Password\n\tlet resetPasswordContainerEl =\tdocument.getElementById('reset-password-container');\n\tlet resetPasswordEmail =\t\tdocument.getElementById('reset-password-email');\n\n\t//event creation\n\tlet eventNameEl =\t\t\t\tdocument.getElementById('event-name');\n\tlet eventTypeEl =\t\t\t\tdocument.getElementById('event-type');\n\tlet eventHostEl =\t\t\t\tdocument.getElementById('event-host');\n\tlet startDateEl =\t\t\t\tdocument.getElementById('start-date');\n\tlet endDateEl =\t\t\t\t\tdocument.getElementById('end-date');\n\tlet contentEl = \t\t\t\tdocument.getElementById('vtil-content');\n\tlet inputEl = \t\t\t\t\tdocument.getElementById('vtil-input');\n\tlet locationInputEl\t=\t\t\tdocument.getElementById('location-input');\n\tlet streetNumberEl =\t\t\tdocument.getElementById('street-number');\n\tlet routeEl =\t\t\t\t\tdocument.getElementById('route');\n\tlet cityEl =\t\t\t\t\tdocument.getElementById('city');\n\tlet stateEl =\t\t\t\t\tdocument.getElementById('state');\n\tlet postalCodeEl =\t\t\t\tdocument.getElementById('postal-code');\n\tlet countryEl =\t\t\t\t\tdocument.getElementById('country');\n\tlet messageEl =\t\t\t\t\tdocument.getElementById('message');\n\tlet progressBarEl =\t\t\t\tdocument.getElementById('progress-bar');\n\tlet progressBarLabelEl =\t\tdocument.getElementById('progress-bar-label');\n\tlet addressList = [streetNumberEl, routeEl, cityEl, stateEl, postalCodeEl, countryEl];\n\n\t//event display\n\tlet eventContainerEl =\t\t\tdocument.getElementById('event-container');\n\tlet showEventContainerEl =\t\tdocument.getElementById('show-event-container');\n\n\tlet events = [];\t\t\t//The users events\n\tlet userRef;\t\t\t\t//Tag input list\n\tlet eventRef;\t\t\t\t//Events\n\tlet extraRef;\t\t\t\t//Extra user data\n\tlet placeSearch;\t\t\t//Location search\n\tlet autocomplete;\t\t\t//Location search\n\tlet storeExtra = false;\t\t//Store extra user info\n\tlet fieldsCompleted = 0;\t//Fields filled out\n\n\t//Validation\n\tlet validator = \t\t\tnew FV.Validator();\n\tlet passwordField = \t\tnew FV.Field(\"Password1\", signupPasswordEl);\n\tlet password2Field = \t\tnew FV.Field(\"Password2\", signupPassword2El, signupPasswordEl);\n\tlet emailField =\t\t\tnew FV.Field('EmailError', signupEmailEl);\n\n\tlet valCheckLengthEl =\t\tdocument.getElementById('val-check-length');\n\tlet valCheckSpecialEl =\t\tdocument.getElementById('val-check-special');\n\tlet valCheckUpperEl =\t\tdocument.getElementById('val-check-upper');\n\tlet valCheckLowerEl =\t\tdocument.getElementById('val-check-lower');\n\tlet valCheckMatchEl =\t\tdocument.getElementById('val-check-match');\n\tlet valCheckRequiredEl =\tdocument.getElementById('val-check-required');\n\tlet valCheckNumberEl =\t\tdocument.getElementById('val-check-number');\n\tlet valCheckEmailEl =\t\tdocument.getElementById('val-check-email');\n\n\tpasswordField.constraints = [\n\t\tnew FV.Constraint(FV.Validator.MINLENGTH, \n\t\t\t\"* Password must be at least 8 characters long.\\n\",\n\t\t\t8),\n\t\tnew FV.Constraint(FV.Validator.CONTAINSUPPER,\n\t\t\t\"* Password must contain at least one upper case letter.\\n\"),\n\t\tnew FV.Constraint(FV.Validator.CONTAINSLOWER,\n\t\t\t\"* Password must contain at least one lower case letter.\\n\"),\n\t\tnew FV.Constraint(FV.Validator.CONTAINSSPECIAL,\n\t\t\t\"* Password must contain at least one special character (!, @, #, $, %, ^, &, *).\\n\"),\n\t\tnew FV.Constraint(FV.Validator.CONTAINSNUMBER,\n\t\t\t\"* Password must contain at least one number.\\n\")\n\t];\n\n\tpassword2Field.constraints = [new FV.Constraint(FV.Validator.EQUALSFIELD,\n\t\t\t\"* Must match your password.\\n\")];\n\n\temailField.constraints = [new FV.Constraint(FV.Validator.EMAIL, \"* Must be a valid email address.\\n\")];\n\n\tvalidator.fields = [passwordField, password2Field, emailField];\n\n\n\t/******************************************************************\n\tSign up functionality\n\t/******************************************************************\n\n\t/**\n\t * User is signing up\n\t * \n\t */\n\tAPP.signUp = function() {\n\n\t\tref.createUser({\n\t\t  email    : signupEmailEl.value,\n\t\t  password : signupPasswordEl.value\n\t\t}, function(error, userData) {\n\n\t\t  if (error) {\n\n\t\t    console.log(\"Error creating user:\", error);\n\n\t\t  } else {\n\n\t\t  \tstoreExtra = true;\n\n\t\t    APP.signIn(signupEmailEl.value, signupPasswordEl.value);\n\n\t\t  }\n\t\t  \n\t\t});\n\n\t};\n\n\t/**\n\t * Check for various validation errors\n\t * \n\t */\n\tfunction checkValFields(errorTypes) {\n\n\t\tif(errorTypes.indexOf(FV.Validator.EMAIL) === -1) {\n\n\t\t\tvalCheckEmailEl.className = 'val-check-good';\n\t\t\tvalCheckEmailEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Must use a valid email address';\n\n\t\t} else {\n\n\t\t\tvalCheckEmailEl.className = 'val-check-bad';\n\t\t\tvalCheckEmailEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Must use a valid email address';\n\n\t\t}\n\n\t\tif(errorTypes.indexOf(FV.Validator.MINLENGTH) === -1) {\n\n\t\t\tvalCheckLengthEl.className = 'val-check-good';\n\t\t\tvalCheckLengthEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Password must be at least 8 characters long';\n\n\t\t} else {\n\n\t\t\tvalCheckLengthEl.className = 'val-check-bad';\n\t\t\tvalCheckLengthEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Password must be at least 8 characters long';\n\n\t\t}\n\n\t\tif(errorTypes.indexOf(FV.Validator.CONTAINSUPPER) === -1) {\n\n\t\t\tvalCheckUpperEl.className = 'val-check-good';\n\t\t\tvalCheckUpperEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Password must contain at least one upper case character';\n\n\t\t} else {\n\n\t\t\tvalCheckUpperEl.className = 'val-check-bad';\n\t\t\tvalCheckUpperEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Password must contain at least one upper case character';\n\n\t\t}\n\n\t\tif(errorTypes.indexOf(FV.Validator.CONTAINSLOWER) === -1) {\n\n\t\t\tvalCheckLowerEl.className = 'val-check-good';\n\t\t\tvalCheckLowerEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Password must contain at least one lower case character';\n\n\t\t} else {\n\n\t\t\tvalCheckLowerEl.className = 'val-check-bad';\n\t\t\tvalCheckLowerEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Password must contain at least one lower case character';\n\n\t\t}\n\n\t\tif(errorTypes.indexOf(FV.Validator.CONTAINSSPECIAL) === -1) {\n\n\t\t\tvalCheckSpecialEl.className = 'val-check-good';\n\t\t\tvalCheckSpecialEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Password must contain at least one special character (!, @, #, $, %, ^, &, *)';\n\n\t\t} else {\n\n\t\t\tvalCheckSpecialEl.className = 'val-check-bad';\n\t\t\tvalCheckSpecialEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Password must contain at least one special character (!, @, #, $, %, ^, &, *)';\n\n\t\t}\n\n\t\tif(errorTypes.indexOf(FV.Validator.EQUALSFIELD) === -1 && signupPasswordEl.value !== '' && signupPassword2El.value !== '') {\n\n\t\t\tvalCheckMatchEl.className = 'val-check-good';\n\t\t\tvalCheckMatchEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Passwords must match';\n\n\t\t} else {\n\n\t\t\tvalCheckMatchEl.className = 'val-check-bad';\n\t\t\tvalCheckMatchEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Passwords must match';\n\n\t\t}\n\n\t\tif(errorTypes.indexOf(FV.Validator.CONTAINSNUMBER) === -1) {\n\n\t\t\tvalCheckNumberEl.className = 'val-check-good';\n\t\t\tvalCheckNumberEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> Password must contain at least one number';\n\n\t\t} else {\n\n\t\t\tvalCheckNumberEl.className = 'val-check-bad';\n\t\t\tvalCheckNumberEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> Password must contain at least one number';\n\n\t\t}\n\n\t\tif( signupNameEl.value === '' || signupEmailEl.value === '' || signupPasswordEl.value === '' || signupPassword2El.value === '') {\n\n\t\t\tvalCheckRequiredEl.className = 'val-check-bad';\n\t\t\tvalCheckRequiredEl.innerHTML = '<i class=\"fa fa-thumbs-o-down\"></i> All required fields must be filled out';\n\n\t\t} else {\n\n\t\t\tvalCheckRequiredEl.className = 'val-check-good';\n\t\t\tvalCheckRequiredEl.innerHTML = '<i class=\"fa fa-thumbs-o-up\"></i> All required fields must be filled out';\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Validate sign up page\n\t * \n\t * @param  {Boolean} skipCustomValidation checks if we will show custom validation\n\t * \n\t */\n\tAPP.validateSignUp = function (skipCustomValidation) {\n\n\t\tlet errors = \t\t\tvalidator.checkForErrors();\n\t\tlet errorTypes = [];\n\t\tlet passwordErrors = \t\"\";\n\t\tlet password2Errors = \t\"\";\n\t\tlet emailErrors =\t\t\"\";\n\n\t\terrors.forEach(error => {\n\n\t\t\tswitch(error.name) {\n\n\t\t\t\tcase \"Password1\":\n\n\t\t\t\t\tpasswordErrors += error.error;\n\t\t\t\t\terrorTypes.push(error.type);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"Password2\":\n\n\t\t\t\t\tpassword2Errors += error.error;\n\t\t\t\t\terrorTypes.push(error.type);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"EmailError\":\n\t\t\t\t\n\t\t\t\t\temailErrors += error.error;\n\t\t\t\t\terrorTypes.push(error.type);\n\t\t\t\t\tbreak;\t\n\n\t\t\t}\n\n\t\t});\n\n\t\tif(passwordErrors !== '') {\n\n\t\t\tpasswordErrors = \"Please correct the following errors:\\n\" + passwordErrors;\n\n\t\t}\n\n\t\tif(password2Errors !== '') {\n\n\t\t\tpassword2Errors = \"Please correct the following errors:\\n\" + password2Errors;\n\n\t\t}\n\n\t\tif(emailErrors !== '') {\n\n\t\t\temailErrors = \"Please correct the following errors:\\n\" + emailErrors;\n\n\t\t}\n\n\t\t//These will only display one at a time\n\t\tif (!skipCustomValidation) {\n\n\t\t\tsignupPasswordEl.setCustomValidity(passwordErrors);\n\t\t\tsignupPassword2El.setCustomValidity(password2Errors);\n\n\t\t}\n\n\t\tcheckValFields(errorTypes);\n\n\t};\n\n\t/**\n\t * Validating input before submitting the password\n\t * \n\t */\n\tsubmitPasswordButton.onclick = APP.validateSignUp;\n\n\t/**\n\t * Show/hide additional info\n\t * \n\t */\n\tAPP.showAdditionalInfo = function() {\n\n\t\tsignupAdditionalInfoEl.hidden = !signupSwitchEl.checked;\n\n\t};\n\n\t/******************************************************************\n\tSign in functionality\n\t/******************************************************************\n\n\t/**\n\t * User has signed in\n\t *\n\t */\n\tfunction authHandler (error, authData) {\n\n\t\tif(error) {\n\n\t\t\t//Handle the error\n\n\t\t} else if (!authData) {\n\n\t\t\tconsole.log(\"User is logged out\");\n\n\t\t} else {\n\n\t\t\tuserRef = ref.child('users/' + authData.uid);\n\t\t\teventRef = userRef.child('events/');\n\t\t\textraRef = userRef.child('extra/');\n\n\t\t\t//If just signing up store the extra user data\n\t\t\tif(storeExtra === true) {\n\n\t\t\t\tstoreExtra = false;\n\n\t\t\t\textraRef.set({\n\n\t\t\t\t\tname: signupNameEl.value,\n\t\t\t\t\temployer: signupEmployerEl.value,\n\t\t\t\t\ttitle: signupTitleEl.value,\n\t\t\t\t\tbirthday: signupBirthday.value\n\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tsignOutLinkEl.hidden = false;\n\t\t\tsignInLinkEl.hidden = true;\n\n\t\t\tAPP.displayEventCreation();\n\n\t\t\t/**\n\t\t\t * Get the data\n\t\t\t * @param  {Object} snapshot value of the event\n\t\t\t */\n\t\t\teventRef.on(\"value\", function(snapshot) {\n\n\t\t\t  events = snapshot.val();\n\n\t\t\t  _redrawEvents();\n\t\t\t  \n\t\t\t}, function(err) {\n\n\t\t\t\tconsole.log('Error: ', err);\n\n\t\t\t});\n\n\t\t}\n\n\t}\n\n\t/**\n\t * User is signing in\n\t * \n\t */\n\tAPP.signIn = function(emailIn, passwordIn) {\n\n\t\tvar email = emailIn || signInEmailEl.value;\n\t\tvar password = passwordIn || signInPasswordEl.value;\n\n\t\t// Sign in with an email/password combination\n\t\tref.authWithPassword({\n\t\t  email    : email ,\n\t\t  password : password\n\t\t}, authHandler);\n\n\t};\n\n\t/******************************************************************\n\tSign out functionality\n\t/******************************************************************\n\n\t/**\n\t * User is signing out\n\t * \n\t */\n\tAPP.signOut = function() {\n\n\t\tsignOutLinkEl.hidden = true;\n\t\tsignInLinkEl.hidden = false;\n\t\tref.unauth();\n\t\teventRef.off();\n\t\textraRef.off();\n\t\tuserRef = undefined;\n\t\teventRef = undefined;\n\t\textraRef = undefined;\n\t\tsignInEmailEl.value = \t\t'';\n\t\tsignInPasswordEl.value = \t'';\n\t\tsignupNameEl.value = \t\t'';\n\t\tsignupEmailEl.value = \t\t'';\n\t\tsignupPasswordEl.value = \t'';\n\t\tsignupPassword2El.value = \t'';\n\t\t_clearElements();\n\t\t_clearEl(eventContainerEl);\n\t\tAPP.showSignIn();\n\n\t};\n\n\t/******************************************************************\n\tReset password functionality\n\t/******************************************************************\n\n\t/**\n\t * Reset the users password\n\t * \n\t */\n\tAPP.resetPassword = function() {\n\n\t\tref.resetPassword({\n\t\t  email: \"\"\n\t\t}, function(error) {\n\t\t  if (error) {\n\t\t    switch (error.code) {\n\t\t      case \"INVALID_USER\":\n\t\t        console.log(\"The specified user account does not exist.\");\n\t\t        break;\n\t\t      default:\n\t\t        console.log(\"Error resetting password:\", error);\n\t\t    }\n\t\t  } else {\n\t\t    console.log(\"Password reset email sent successfully!\");\n\t\t  }\n\t\t});\n\n\t};\n\n\t/******************************************************************\n\tEvent functionality\n\t/******************************************************************\n\n\t/**\n\t* Instantiate a new vtil object\n\t* \n\t**/ \n\tVTILAPP.vtil = new VTIL(contentEl, inputEl, 'VTILAPP.vtil');\n\n\t/**\n\t * Checks if fields are completed\n\t * \n\t */\n\tAPP.checkEventFields = function() {\n\n\t\tlet completed = 0;\n\n\t\tif(eventNameEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\n\t\tif(eventTypeEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\n\t\tif(eventHostEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\n\t\tif(startDateEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\n\t\tif(endDateEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\n\t\tif(VTILAPP.vtil.tags.length > 0) {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\t\t\n\t\tif(streetNumberEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\n\t\tif(routeEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\n\t\tif(cityEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\t\t\n\t\tif(stateEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\t\t\n\t\tif(postalCodeEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\n\t\tif(countryEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\n\t\tif(messageEl.value !== '') {\n\n\t\t\tcompleted += 1;\n\n\t\t}\n\t\t\n\t\tfieldsCompleted = completed;\n\t\tprogressBarLabelEl.innerHTML = fieldsCompleted.toString() + ' of 13 fields completed'\n\t\tprogressBarEl.value = fieldsCompleted;\n\n\t};\n\n\t/**\n\t * Display event creation if user has logged in\n\t * \n\t */\n\tAPP.displayEventCreation = function() {\n\n\t\tif(eventRef) {\n\n\t\t\tshowEventPlanner();\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Display events if user has logged in\n\t * \n\t */\n\tAPP.displayEvents = function() {\n\n\t\tif(eventRef) {\n\n\t\t\tshowEventContainer();\n\n\t\t}\n\n\t};\n\n\t/**\n\t* Clear all child elements\n\t*\n\t**/ \n\tfunction _clearEl(el) {\n\n\t\twhile (el.firstChild) {\n\n\t\t\tel.removeChild(el.firstChild);\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Draw the events to te screen\n\t * \n\t */\n\tfunction _redrawEvents() {\n\n\t\t_clearEl(eventContainerEl);\n\n\t\tevents.forEach(function(event) {\n\n\t\t\t//Create the card\n\t\t\tvar cardDiv = document.createElement('div');\n\t\t\tcardDiv.className = \"card-width mdl-card mdl-shadow--2dp vert-cent animated slideInDown\"\n\n\t\t\t//Card Title\n\t\t\tvar cardTitleDiv = document.createElement('div');\n\t\t\tcardTitleDiv.className = \"mdl-card__title\";\n\t\t\tvar headerDiv = document.createElement('h2');\n\t\t\theaderDiv.className = \"mdl-card__title-text\";\n\t\t\theaderDiv.appendChild(document.createTextNode(event.title));\n\n\t\t\tvar del = document.createElement('a');\n\t\t\tdel.setAttribute('href', \"#\");\n\t\t\tdel.setAttribute('title', \"Delete\");\n\t\t\tdel.className = \"card-trash\";\n\t\t\tdel.setAttribute('onclick', 'APP.removeEvent(\"' + event.id + '\")');\n\t\t\tdel.innerHTML = '<i class=\"fa fa-trash-o\"></i>';\n\n\t\t\theaderDiv.appendChild(del);\n\t\t\tcardTitleDiv.appendChild(headerDiv);\n\t\t\tcardDiv.appendChild(cardTitleDiv);\n\n\t\t\t//Card Body\n\t\t\tvar cardContentDiv = document.createElement('div');\n\t\t\tcardContentDiv.className = \"mdl-card__supporting-text\";\n\t\t\tvar p = document.createElement('p');\n\t\t\tp.innerHTML = \"<b>\" + event.host + '</b> is hosting a ' + '<b>' + \n\t\t\tevent.type + '</b> at ';\n\t\t\tcardContentDiv.appendChild(p);\n\n\t\t\tp = document.createElement('p');\n\t\t\tp.innerHTML = event.address + '<br />' + event.city + ', ' + \n\t\t\tevent.state + ' ' + event.zip + '<br />' + event.country;\n\t\t\tcardContentDiv.appendChild(p);\n\n\t\t\tp = document.createElement('p');\n\t\t\tp.appendChild(document.createTextNode(\"on\"));\n\t\t\tcardContentDiv.appendChild(p);\n\n\t\t\tp = document.createElement('p');\n\t\t\tvar begin = new Date(event.begin);\n\t\t\tvar end = new Date(event.end);\n\t\t\tp.innerHTML = '<b>' + begin.toLocaleString() + '</b>' + ' to ' + \n\t\t\t'<b>' + end.toLocaleString() + '</b>';\n\t\t\tcardContentDiv.appendChild(p);\n\n\t\t\tp = document.createElement('p');\n\t\t\tp.innerHTML = 'and <b>' + event.host + '</b> wishes to let you know that<br/>' + event.message;\n\t\t\tcardContentDiv.appendChild(p);\n\n\t\t\tcardDiv.appendChild(cardContentDiv);\n\t\t\teventContainerEl.appendChild(cardDiv);\n\n\t\t});\n\n\t}\n\n\t/**\n\t * Add a person\n\t * \n\t */\n\tAPP.addTag = function() {\n\n\t\tVTILAPP.vtil.addTag();\n\t\tAPP.checkEventFields();\n\n\t};\n \n\t/**\n\t * Clear guests\n\t * \n\t */\n\tfunction _clearGuests() {\n\n\t\tvar tags = VTILAPP.vtil.tags.slice(0);\n\n\t\ttags.forEach(function(tag) {\n\n\t\t\tVTILAPP.vtil.removeTag(tag.id);\n\n\t\t});\n\n\t}\n\n\t/**\n\t * Clear the address elements\n\t * @param  {Boolean} pred disable the field or not?\n\t * \n\t */\n\tfunction _clearAddress(pred) {\n\n\t\taddressList.forEach(function(addressEl) {\n\n\t\t  \taddressEl.value = '';\n\t\t  \taddressEl.disabled = pred;\n\n\t\t  });\n\n\t}\n\n\t/**\n\t * Clear the form elements\n\t * \n\t */\n\tfunction _clearElements() {\n\n\t\teventNameEl =\t\t\t\tdocument.getElementById('eventName');\n\t\teventTypeEl =\t\t\t\tdocument.getElementById('eventType');\n\t\teventHostEl =\t\t\t\tdocument.getElementById('eventHost');\n\t\tstartDateEl =\t\t\t\tdocument.getElementById('startDate');\n\t\tendDateEl =\t\t\t\t\tdocument.getElementById('endDate');\n\t\tlocationInputEl\t=\t\t\tdocument.getElementById('location-input');\n\n\t\t_clearAddress(true);\n\t\t_clearGuests();\n\n\t}\n\n\t/**\n\t * Fills in the address when the location is retrieved\n\t * \n\t */\n\tfunction _fillInAddress() {\n\t  // Get the place details from the autocomplete object.\n\t  var place = autocomplete.getPlace();\n\n\t  _clearAddress(false);\n\n\t  // Get each component of the address from the place details\n\t  // and fill the corresponding field on the form.\n\t  for (var component of place.address_components) {\n\n\t    var addressType = component.types[0];\n\n\t    switch(addressType) {\n\n\t    \t//Address1\n\t    \tcase 'street_number':\n\t    \t\tstreetNumberEl.value = component.short_name;\n\t    \t\tbreak;\n\n\t    \t//Address2\n\t    \tcase 'route':\n\t    \t\trouteEl.value = component.short_name;\n\t    \t\tbreak;\n\n\t    \t//City\n\t    \tcase 'locality':\n\t    \t\tcityEl.value = component.short_name;\n\t    \t\tbreak;\n\n\t    \t//State\n\t    \tcase 'administrative_area_level_1':\n\t    \t\tstateEl.value = component.short_name;\n\t    \t\tbreak;\n\n\t    \t//Zip\n\t    \tcase 'postal_code':\n\t    \t\tpostalCodeEl.value = component.short_name;\n\t    \t\tbreak;\n\n\t    \t//Country\n\t    \tcase 'country':\n\t    \t\tcountryEl.value = component.short_name;\n\t    \t\tbreak;\n\n\t    }\n\n\t  }\n\n\t}\n\n\t/**\n\t * Initializes the autocomplete object using the location\n\t * \n\t */\n\tAPP.initAutocomplete = function() {\n\t  // Create the autocomplete object, restricting the search to geographical\n\t  // location types.\n\t  autocomplete = new google.maps.places.Autocomplete(\n\t      /** @type {!HTMLInputElement} */(locationInputEl),\n\t      {types: ['geocode']});\n\n\t  // When the user selects an address from the dropdown, populate the address\n\t  // fields in the form.\n\t  autocomplete.addListener('place_changed', _fillInAddress);\n\t};\n\n\t/**\n\t * Get the location\n\t * \n\t */\n\tAPP.geolocate = function() {\n\n\t  if (navigator.geolocation) {\n\n\t    navigator.geolocation.getCurrentPosition(function(position) {\n\n\t      let geolocation = {\n\n\t        lat: position.coords.latitude,\n\t        lng: position.coords.longitude\n\n\t      };\n\n\t      let circle = new google.maps.Circle({\n\n\t        center: geolocation,\n\t        radius: position.coords.accuracy\n\n\t      });\n\n\t      autocomplete.setBounds(circle.getBounds());\n\n\t    });\n\n\t  }\n\n\t};\n\n\t/**\n\t * Remove an event from events\n\t * @param  {[type]} id [description]\n\t * @return {[type]}    [description]\n\t */\n\tAPP.removeEvent = function(id) {\n\n\t\tlet index = -1;\n\n\t\tfor(let i = 0; i < events.length; ++i) {\n\n\t\t\tif(id === events[i].id) {\n\n\t\t\t\tindex = i;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif(index !== -1) {\n\n\t\t\tevents = events.splice(index, 1);\n\t\t\teventRef.set(events);\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Save the event\n\t *\n\t */\n\tAPP.submitForm = function() {\n\n\t\tvar d = new Date();\n\n\t\tevents.push({\n\n\t\t\t'id': \t\td.toISOString(),\n\t\t\t'title': \teventNameEl.value,\n\t\t\t'type': \teventTypeEl.value,\n\t\t\t'host': \teventHostEl.value,\n\t\t\t'begin': \tstartDateEl.value,\n\t\t\t'end': \t\tendDateEl.value,\n\t\t\t'guests': \tVTILAPP.vtil.tags,\n\t\t\t'address': \tstreetNumberEl.value + ' ' + routeEl.value,\n\t\t\t'city': \tcityEl.value,\n\t\t\t'state': \tstateEl.value,\n\t\t\t'zip': \t\tpostalCodeEl.value,\n\t\t\t'country': \tcountryEl.value,\n\t\t\t'message': \tmessageEl.value\n\n\t\t});\n\n\t\teventRef.set(events);\n\n\t\t_clearElements();\n\n\t};\n\n\t/**\n\t * Sign out on exit\n\t * \n\t */\n\twindow.onbeforeunload = APP.signOut;\n\n\t/******************************************************************\n\tDisplay functionality\n\t/******************************************************************\n\n\t/**\n\t * Show the sign up form\n\t * \n\t */\n\tAPP.showSignUp = function() {\n\n\t\tsignInContainerEl.hidden = true;\n\t\teventPlannerContainerEl.hidden = true;\n\t\tsignUpContainerEl.hidden = false;\n\t\tresetPasswordContainerEl.hidden = true;\n\t\tshowEventContainerEl.hidden = true;\n\t\tAPP.validateSignUp(true);\n\n\t};\n\n\t/**\n\t * Show the sign in form\n\t * \n\t */\n\tAPP.showSignIn = function() {\n\n\t\tsignInContainerEl.hidden = false;\n\t\teventPlannerContainerEl.hidden = true;\n\t\tsignUpContainerEl.hidden = true;\n\t\tresetPasswordContainerEl.hidden = true\n\t\tshowEventContainerEl.hidden = true;\n\n\t};\n\n\t/**\n\t * Show the event planner\n\t * \n\t */\n\tfunction showEventPlanner () {\n\n\t\tsignInContainerEl.hidden = true;\n\t\teventPlannerContainerEl.hidden = false;\n\t\tsignUpContainerEl.hidden = true;\n\t\tresetPasswordContainerEl.hidden = true;\n\t\tshowEventContainerEl.hidden = true;\n\n\t\tAPP.checkEventFields();\n\n\t};\n\n\t/**\n\t * Show the reset password screen\n\t * \n\t */\n\tAPP.showResetPassword = function() {\n\n\t\tsignInContainerEl.hidden = true;\n\t\teventPlannerContainerEl.hidden = true;\n\t\tsignUpContainerEl.hidden = true;\n\t\tresetPasswordContainerEl.hidden = false;\n\t\tshowEventContainerEl.hidden = true;\n\n\t};\n\n\t/**\n\t * Show the events\n\t * \n\t */\n\tfunction showEventContainer () {\n\n\t\tsignInContainerEl.hidden = true;\n\t\teventPlannerContainerEl.hidden = true;\n\t\tsignUpContainerEl.hidden = true;\n\t\tresetPasswordContainerEl.hidden = true;\n\t\tshowEventContainerEl.hidden = false;\n\n\t};\n\n})(document);"],"sourceRoot":"/source/"}