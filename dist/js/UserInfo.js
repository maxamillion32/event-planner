"use strict";function _classCallCheck(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,a){for(var s=0;s<a.length;s++){var n=a[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(a,s,n){return s&&e(a.prototype,s),n&&e(a,n),a}}(),UserInfo=function(){function e(e){-1===e.indexOf(FV.Validator.MINLENGTH)?(h.className="val-check-good",h.innerHTML='<i class="fa fa-thumbs-o-up"></i>&nbsp;&nbsp;Password must be at least 8 characters long'):(h.className="val-check-bad",h.innerHTML='<i class="fa fa-thumbs-o-down"></i>&nbsp;&nbsp;Password must be at least 8 characters long'),-1===e.indexOf(FV.Validator.CONTAINSUPPER)?(f.className="val-check-good",f.innerHTML='<i class="fa fa-thumbs-o-up"></i>&nbsp;&nbsp;Password must contain at least one upper case character'):(f.className="val-check-bad",f.innerHTML='<i class="fa fa-thumbs-o-down"></i>&nbsp;&nbsp;Password must contain at least one upper case character'),-1===e.indexOf(FV.Validator.CONTAINSLOWER)?(b.className="val-check-good",b.innerHTML='<i class="fa fa-thumbs-o-up"></i>&nbsp;&nbsp;Password must contain at least one lower case character'):(b.className="val-check-bad",b.innerHTML='<i class="fa fa-thumbs-o-down"></i>&nbsp;&nbsp;Password must contain at least one lower case character'),-1===e.indexOf(FV.Validator.EQUALSFIELD)&&""!==c.value&&""!==u.value?(v.className="val-check-good",v.innerHTML='<i class="fa fa-thumbs-o-up"></i>&nbsp;&nbsp;Passwords must match'):(v.className="val-check-bad",v.innerHTML='<i class="fa fa-thumbs-o-down"></i>&nbsp;&nbsp;Passwords must match'),-1===e.indexOf(FV.Validator.CONTAINSNUMBER)?(p.className="val-check-good",p.innerHTML='<i class="fa fa-thumbs-o-up"></i>&nbsp;&nbsp;Password must contain at least one number'):(p.className="val-check-bad",p.innerHTML='<i class="fa fa-thumbs-o-down"></i>&nbsp;&nbsp;Password must contain at least one number'),""===i||""===c.value||""===u.value?(m.className="val-check-bad",m.innerHTML='<i class="fa fa-thumbs-o-down"></i>&nbsp;&nbsp;All required fields must be filled out'):(m.className="val-check-good",m.innerHTML='<i class="fa fa-thumbs-o-up"></i>&nbsp;&nbsp;All required fields must be filled out')}function a(e){var a=e.val();s.value=a.name,s.value&&(w.className+=" is-dirty"),n.value=a.employer,n.value&&(y.className+=" is-dirty"),t.value=a.title,t.value&&(g.className+=" is-dirty"),r.value=a.birthday,r.value&&(I.className+=" is-dirty"),UserInfo.checkFields()}var s=document.getElementById("user-info-name"),n=document.getElementById("user-info-employer"),t=document.getElementById("user-info-title"),r=document.getElementById("user-info-birthday"),o=document.getElementById("submit-user-info-button"),l=document.getElementById("user-info-spinner"),i=document.getElementById("user-info-old-password"),c=document.getElementById("user-info-new-password"),u=document.getElementById("user-info-new-password-repeated"),d=document.getElementById("change-password-button"),m=document.getElementById("user-val-check-required"),h=document.getElementById("user-val-check-length"),f=document.getElementById("user-val-check-upper"),b=document.getElementById("user-val-check-lower"),p=document.getElementById("user-val-check-number"),v=document.getElementById("user-val-check-match"),w=document.getElementById("user-name-div"),y=document.getElementById("user-organization-div"),g=document.getElementById("user-job-div"),I=document.getElementById("user-bday-div"),k=new FV.Validator,E=new FV.Field("Password1",c),N=new FV.Field("Password2",u,c);return E.constraints=[new FV.Constraint(FV.Validator.MINLENGTH,"* Password must be at least 8 characters long.\n",8),new FV.Constraint(FV.Validator.CONTAINSUPPER,"* Password must contain at least one upper case letter.\n"),new FV.Constraint(FV.Validator.CONTAINSLOWER,"* Password must contain at least one lower case letter.\n"),new FV.Constraint(FV.Validator.CONTAINSNUMBER,"* Password must contain at least one number.\n")],N.constraints=[new FV.Constraint(FV.Validator.EQUALSFIELD,"* Must match your password.\n")],k.fields=[E,N],o.disabled=!0,function(){function m(e,a){_classCallCheck(this,m),this.extraRef=e,this.ref=a,this.email=void 0}return _createClass(m,[{key:"changePassword",value:function(){l.hidden=!1,Displayer.userInfoContainerEl.hidden=!0,this.ref.changePassword({email:this.email,oldPassword:i.value,newPassword:c.value},function(e){if(l.hidden=!0,Displayer.userInfoContainerEl.hidden=!1,e)switch(e.code){case"INVALID_PASSWORD":Displayer.showSnackbar("Sorry!  The password is incorrect.  :-(");break;case"INVALID_USER":Displayer.showSnackbar("Sorry!  The user account doesn't exist.  :-(");break;default:Displayer.showSnackbar("Sorry!  There was an error changing your password.  :-(")}else Displayer.showSnackbar("Nice!  You just got yourself a brand new password.  :-)");i.value="",c.value="",u.value="",m.checkPasswords()})}},{key:"saveInfo",value:function(){l.hidden=!1,Displayer.userInfoContainerEl.hidden=!0,this.extraRef.update({name:s.value,employer:n.value,title:t.value,birthday:r.value},function(e){l.hidden=!0,Displayer.userInfoContainerEl.hidden=!1,e?Displayer.showSnackbar("Error updating your info, Please forgive me! :-("):Displayer.showSnackbar("Info upated, Aaaaawwwww Yeah! :-)")})}},{key:"listenForData",value:function(){try{this.extraRef.on("value",a)}catch(e){}}},{key:"dispose",value:function(){this.extraRef.off("value",a),this.extraRef=void 0,this.ref=void 0,this.email=void 0,s.value="",n.value="",t.value="",r.value="",i.value="",c.value="",u.value=""}}],[{key:"checkFields",value:function(){o.disabled=""===s.value}},{key:"checkPasswords",value:function(){var a=k.checkForErrors(),s=[],n="",t="";a.forEach(function(e){switch(e.name){case"Password1":n+=e.error,s.push(e.type);break;case"Password2":t+=e.error,s.push(e.type)}}),""!==n&&(n="Please correct the following errors:\n"+n),""!==t&&(t="Please correct the following errors:\n"+t),c.setCustomValidity(n),u.setCustomValidity(t),d.disabled=s.length>0,e(s)}},{key:"userInfoNameEl",get:function(){return s}}]),m}()}();