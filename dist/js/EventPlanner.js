"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),VTILAPP=VTILAPP||Object.create(null),EventPlanner=function(e){function t(){var e=VTILAPP.vtil.tags.slice(0);e.forEach(function(e){VTILAPP.vtil.removeTag(e.id)})}function n(){N.forEach(function(e){e.value=""})}function a(){r.value="",o.value="",d.value="",s.value="",u.value="",y.value="",I.value="",p.value=0,B.innerHTML="0 of "+i.toString()+" fields completed",n(),t()}function l(){var e=S.getPlace();n(!1);var t=!0,a=!1,l=void 0;try{for(var i,r=e.address_components[Symbol.iterator]();!(t=(i=r.next()).done);t=!0){var o=i.value,d=o.types[0];switch(d){case"street_number":g.value=o.short_name;break;case"route":g.value+=" "+o.short_name,_.className+=" is-dirty";break;case"locality":m.value=o.short_name,w.className+=" is-dirty";break;case"administrative_area_level_1":f.value=o.short_name,L.className+=" is-dirty";break;case"postal_code":h.value=o.short_name,A.className+=" is-dirty";break;case"country":E.value=o.short_name,C.className+=" is-dirty"}}}catch(s){a=!0,l=s}finally{try{!t&&r["return"]&&r["return"]()}finally{if(a)throw l}}EventPlanner.checkEventFields()}var i=11,r=e.getElementById("event-name"),o=e.getElementById("event-type"),d=e.getElementById("event-host"),s=e.getElementById("start-date"),u=e.getElementById("end-date"),v=e.getElementById("vtil-content"),c=e.getElementById("vtil-input"),y=e.getElementById("location-input"),g=e.getElementById("street-number"),m=e.getElementById("city"),f=e.getElementById("state"),h=e.getElementById("postal-code"),E=e.getElementById("country"),I=e.getElementById("message"),p=e.getElementById("progress-bar"),B=e.getElementById("progress-bar-label"),b=e.getElementById("submit-event-button"),k=e.getElementById("add-button"),P=e.getElementById("event-planner-spinner"),T=e.getElementById("event-host-div"),_=(e.getElementById("location-input-div"),e.getElementById("address-div")),w=e.getElementById("city-div"),L=e.getElementById("state-div"),A=e.getElementById("zip-div"),C=e.getElementById("country-div"),V=(e.getElementById("location-button"),e.getElementById("start-date-error")),D=e.getElementById("end-date-error"),N=[g,m,f,h,E],S=void 0;return b.disabled=!0,VTILAPP.vtil=new VTIL(v,c,"VTILAPP.vtil"),function(){function e(t){_classCallCheck(this,e),this.events=[],this.eventRef=t}return _createClass(e,[{key:"geolocate",value:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude},n=new google.maps.Circle({center:t,radius:e.coords.accuracy});S.setBounds(n.getBounds())})}},{key:"submitForm",value:function(){P.hidden=!1,Displayer.eventPlannerContainerEl.hidden=!0,this.eventRef.push({title:r.value,type:o.value,host:d.value,begin:s.value,end:u.value,guests:VTILAPP.vtil.tags,address:g.value,city:m.value,state:f.value,zip:h.value,country:E.value,message:I.value},function(e){P.hidden=!0,Displayer.eventPlannerContainerEl.hidden=!1,e?Displayer.showSnackbar("There was an error adding the event, how rude!  :-("):Displayer.showSnackbar("Event popped and locked!  :-)")}),a()}},{key:"addTag",value:function(){VTILAPP.vtil.addTag(),e.checkEventFields(),k.disabled=!0}},{key:"dispose",value:function(){a(),this.eventRef=void 0}}],[{key:"checkEventFields",value:function(){var e=0;if(""!==r.value&&(e+=1),""!==o.value&&(e+=1),""!==d.value&&(e+=1),""!==s.value)if(""!==u.value){var t=new Date(s.value),n=new Date(u.value),a=Math.floor((n-t)/1e3/60);0>a?V.hidden=!1:(e+=1,V.hidden=!0)}else e+=1,V.hidden=!0;if(""!==u.value)if(""!==s.value){var t=new Date(s.value),n=new Date(u.value),a=Math.floor((n-t)/1e3/60);0>a?D.hidden=!1:(e+=1,D.hidden=!0)}else e+=1,D.hidden=!0;VTILAPP.vtil.tags.length>0&&(e+=1),""!==g.value&&(e+=1),""!==m.value&&(e+=1),""!==f.value&&(e+=1),""!==h.value&&(e+=1),""!==E.value&&(e+=1),B.innerHTML=e.toString()+" of "+i.toString()+" fields completed",p.value=e,b.disabled=e!==i}},{key:"initAutocomplete",value:function(){S=new google.maps.places.Autocomplete(y,{types:["geocode"]}),S.addListener("place_changed",l)}},{key:"checkGuestField",value:function(){k.disabled=""===c.value}},{key:"eventNameEl",get:function(){return r}},{key:"eventHostEl",get:function(){return d}},{key:"eventHostDiv",get:function(){return T}}]),e}()}(document);