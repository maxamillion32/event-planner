"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),ShowEvents=function(e){function t(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function n(n){t(Displayer.eventContainerEl);var i=Object.keys(n);0===i.length?a.hidden=!1:(a.hidden=!0,i.forEach(function(t){var a=e.createElement("div");a.className="card-width mdl-card mdl-shadow--2dp vert-cent animated slideInDown";var i=e.createElement("div");i.className="mdl-card__title";var s=e.createElement("h2");s.className="mdl-card__title-text",s.appendChild(e.createTextNode(n[t].title));var r=e.createElement("a");r.setAttribute("href","#"),r.setAttribute("title","Delete"),r.className="card-trash",r.setAttribute("onclick",'app.showEvents.removeEvent("'+t+'")'),r.innerHTML='<i class="fa fa-trash-o"></i>',s.appendChild(r),i.appendChild(s),a.appendChild(i);var l=e.createElement("div");l.className="mdl-card__supporting-text";var c=e.createElement("p");c.className="event-content",c.innerHTML="<b>"+n[t].host+"</b> is hosting a <b>"+n[t].type+"</b> at ",l.appendChild(c),c=e.createElement("p"),c.className="event-content",c.innerHTML=n[t].address+"<br />"+n[t].city+", "+n[t].state+" "+n[t].zip+"<br />"+n[t].country,l.appendChild(c),c=e.createElement("p"),c.className="event-content",c.appendChild(e.createTextNode("on")),l.appendChild(c),c=e.createElement("p"),c.className="event-content";var o=new Date(n[t].begin),d=new Date(n[t].end);c.innerHTML="<b>"+o.toLocaleString()+"</b> to <b>"+d.toLocaleString()+"</b>",l.appendChild(c),c=e.createElement("p"),c.className="event-content";var v="Everybody who's anybody is going including ";n[t].guests.forEach(function(e){v+="<b>"+e.value+"</b> "}),c.innerHTML=v,l.appendChild(c),c=e.createElement("p"),c.className="event-content",c.innerHTML="and <b>"+n[t].host+"</b> wishes to let you know that<br/>"+n[t].message,l.appendChild(c),a.appendChild(l),Displayer.eventContainerEl.appendChild(a)}))}var a=e.getElementById("no-events-container");return function(){function e(t,n){_classCallCheck(this,e),this.events=t||{},this.eventRef=n,this.eventRef&&this.listenForEvents()}return _createClass(e,[{key:"_addEvents",value:function(e){var t=e.val();null!==t&&(this.events=Object.assign(this.events,t)),n(this.events)}},{key:"listenForEvents",value:function(){try{this.eventRef.on("value",this._addEvents.bind(this))}catch(e){}}},{key:"removeEvent",value:function(e){var t=Object.assign({},this.events);this.events={};var a=this.eventRef.child(e);a.remove(function(e){e&&(Displayer.showSnackbar("Sorry, we had an error removing the event. :-("),this.events=t,n(this.events))}.bind(this))}},{key:"dispose",value:function(){this.eventRef.off("value",this._addEvents.bind(this)),this.events=[],n(this.events),this.eventRef=void 0}}]),e}()}(document);